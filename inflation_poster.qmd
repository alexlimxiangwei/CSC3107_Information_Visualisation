---
title: Inflation in the USA 
format:
  poster-typst: 
    size: "33x23" # Approximately A1
    poster-authors: "Loh Xian Ming Jeremiah, Wong Zhen Line, Veleon Lim Ming Zhe, Farah Binte Mohamed Tajudeen, Lim Xiang Wei Alex, Javier Ng Wei Cheng"
    departments: "Computing Science"
    institution-logo: "./images/sit-logo.png"
    univ-logo-scale: 50
    footer-text: "Information Visualization 2024"
    footer-emails: "singaporetech.edu.sg"
    footer-color: "ebcfb2"
    keep-typ: true
 
execute:
  echo: false
knitr:
  opts_chunk:
    dev: svglite
---

```{r}
#| label: setup
#| include: false

library(knitr)
purl("inflation_prep.qmd")
source("inflation_prep.R")
purl("inflation_vis.qmd")
source("inflation_vis.R")
```

# Introduction

Inflation, the rate at which the general level of prices for goods and services rises, eroding purchasing power, is a key economic indicator. It impacts everything from the cost of groceries to the interest rates on loans[^1]. While moderate inflation is a sign of a growing economy, excessive inflation can reduce the value of money, leading to financial strain for consumers. In this project, we have built on a comprehensive visualization to monitor inflation across various consumer metrics in the USA, originally published by NBC News [^2] (@fig-nbc-on-poster). The visualization below shows monthly changes in consumer prices compared to the same time the previous year. Despite the visualization's effectiveness in showing an overview of the price changes, we aim to improve certain aspects to better highlight the underlying trend of inflation change in a year-over-year basis of different consumer metrics.

[^1]: https://www.hbs.edu/ris/Publication%20Files/Paper_Covid_Price_IMFER_23_4663bd2c-c1a8-4448-aa9f-98a3bc197142.pdf

[^2]: <https://www.nbcnews.com/data-graphics/inflation-tracker-how-much-prices-rising-us-consumers-n1296378>

# Previous Visualization

```{r}
#| label: fig-nbc-on-poster
#| fig-cap: "Yearly Percentage Change in Consumer Prices for major catergories of goods in the USA, published by NBC News."
#| out-width: 90%

include_graphics("images/inflation-original.png")
```

# Strengths

-   The plot title and subtitle is clear and informative, immediately providing context and helping readers to understand the focus of the visualization.
-   The heatmap design effectively conveys a high information content without cluttering the plot. This allows for quick and intuitive understanding of the data trends.
-   Pointing with the mouse at a tile opens an infotip, enabling readers to retrieve specific incidence data for a given state and year (@fig-infotip_color_change). The infotip only occludes a small portion of the plot, and the partial transparency of the infotip ensures visibility of the tiles underneath.
-   The colors chosen (red and blue) are color-blind friendly, ensuring that the visualization is accessible to a wider audience.
-   The inclusion of detailed source information at the bottom of the chart adds credibility and transparency to the data presented.
-   The overall design is user-friendly, with a clean layout, intuitive color coding, and easy-to-read labels, making the visualization accessible to a broad audience.
-   The color legend is clear and informative which helps readers to quickly understand the meaning of the the colors (red-increasing inflation, blue-decreasing inflation) and the range of percentage changes displayed.

```{r}
#| label: fig-infotip_color_change
#| fig-cap: "Zoomed-in screenshot of the original plot with and without
#|   activated infotip."
#| out-width: 100%

#include_graphics("images/infotip_color_change.png")
```

# Suggested Improvements

1.  *Adding more layers of information to the chart.*

    Information like:

    -   Inflation was due to major events like COVID-19, recessions, or weather changes (e.g. hotter/colder seasons)
    -   Inflation in different geographical locations

2.  *Varying the size of the square boxes* to convey additional information (e.g. size of industry, as each category has varying impacts on the economy.

3.  *Incorporate mirrored histograms, stacked histograms, or separate histograms* to present the data more effectively.

4.  *Shade areas* to represent significant events such as recessions or the COVID-19 pandemic.

5.  *Add an interactive straight line* for readers to follow across the graph, enhancing readability and comprehension.

6.  *Add a category like "Others"* to capture data that does not fit into the predefined categories, ensuring completeness.

# Implementation

## Data

-   **Data Source:** The data used for this project is based on the visualization data from Joella Carman and Nigel Chiwaya, featured on NBC News. They utilized the information from the Bureau of Labor Statistics and Energy Information Administration data to depict year-over-year inflation for major categories of goods.
-   **Data Period:** Our analysis makes use of data from January 2019 to March 2024, rather than the initial period from May 2023 to April 2024. With this longer time frame, the inflation rates for the chosen main product groups are more clearly displayed.

## Software

We used the Quarto publication framework and the R programming language, along with the following third-party packages:

-   *readxl* for data import
-   *tidyverse* for data transformation, including *ggplot2* for visualization based on the grammar of graphics
-   *knitr* for dynamic document generation
-   *purrr* for functional programming tools
-   *pheatmap* for creating heatmaps and having more control over the dimensions and appearance
-   *scales* for additional scaling functions
-   *stringr* for string manipulation

```{=typst}
#v(2em)
```
# Improved Visualization
```{r}
#| label: plot-with-white-lines-2
#| fig.width: 10
#| fig.height: 5

# Wrap long expenditure category labels
long_data$expenditure_category <- str_wrap(long_data$expenditure_category, width = 20)

# Plot the inflation rates over time with heatmap
ggplot() +
  geom_tile(data=long_data, aes(x = date, y = expenditure_category, fill = inflation_rate), color = "white") +
  theme_minimal() +
  scale_fill_distiller(palette = "RdYlBu") +
  theme(axis.text.x = element_text(angle = 45, hjust = 1)) +
  theme(axis.text.x = element_blank())+
  geom_line(data = covid_data, aes(x = month, y = total_cases * 8 + 0.5, group = 1, color = "Number of COVID-19 cases")) +
  scale_x_discrete(breaks = levels(covid_data$month)[seq(1, length(levels(covid_data$month)), by = 3)]) +
  scale_color_manual(values = c("Number of COVID-19 cases" = "red")) +
  theme(axis.text.x = element_text(angle = 45, hjust = 1),
        axis.text.y = element_text(size = 8),
        legend.position = "right",
        axis.title.x = element_text(vjust = -1, margin = margin(t = 10)),
        plot.title = element_text(hjust = 0.5),
        axis.title.y = element_text(vjust = 2)) +
  labs(title = "Impact of COVID-19 on Inflation Rates for Selected Categories Over Time",
       x = "Time",
       y = "Expenditure Category",
       fill = "Year-over-Year Price Change (%)",
       color = "Data Type") +
  guides(color = guide_legend(title = "COVID-19 Label", override.aes = list(linetype = c("solid"))))

```

# Further Suggestions for Interactivity

Because our visualization was intended for a poster, we did not implement any interactive features, including the infotip. However, if the data are visualized in an HTML document, interactive features can be achieved using the R packages such as *plotly*. In that case, we recommend that the tile does not change its fill color. In contrast, the original visualization changes the fill color of the activated tile to light blue (see @fig-infotip_color_change), which can be misinterpreted as a change in incidence. Instead, we suggest highlighting the activated tile by thickening its border.

# Conclusion

We successfully implemented the suggested improvements for the non-interactive visualization, including adding layers of information about major events like COVID-19 and its impact on inflation rates across various categories, providing a richer contextual understanding of the data. Our continuous timeline and intuitive heat map color gradient from blue to red effectively illustrate trends and changes over time. Furthermore, The inclusion of COVID-19 case data adds depth, highlighting correlations between the pandemic and inflation fluctuations. These enhancements make the improved visualization more comprehensive and insightful, effectively illustrating trends and correlations over time.
